2009-04-24  Martyn Russell  <martyn@imendio.com>

	Bumped version for release

	Prepare for release 0.6.94

2009-04-24  Mikael Ottela  <mikael.ottela@ixonos.com>

	Add a safeguard to freeing the pipeline in gstreamer extractor
	A safeguard has been added in gstreamer extractor to check that the pipeline
	is in NULL state before freeing it.

	Fixes NB#112393.

2009-04-22  Philip Van Hoof  <philip@codeminded.be>

	Compilation warnings in the push plugins

2009-04-22  Martyn Russell  <martyn@imendio.com>

	Updated albumart strip code to work with utf8 and be clearer
	* utils/albumart/albumart-strip.c: Added to test these strings out
	  using the libtracker-common API call.

2009-04-22  Chris Coulson  <chrisccoulson@googlemail.com>

	Do not trigger crawling under any circumstance if EnableIndexing is false.

2009-04-22  Ivan Frade  <ivan.frade@nokia.com>

	Add tracker-albumart tests
	Added unit tests to the albumart path generation algorythm. Still some
	cases pending to test.

2009-04-22  Philip Van Hoof  <philip@codeminded.be>

	Adapted album-art name determination to follow new spec rules
	Backport from master to tracker-0.6 branch

2009-04-22  Mikael Ottela  <mikael.ottela@ixonos.com>

	Comment out extractor tests that require testdata.
	The test cases for extraction that require generation of test data are
	commented out so they won't fail in automated checking.

2009-04-21  Martyn Russell  <martyn@imendio.com>

	Added more information about module use to tracker-extract
	* src/tracker-extract/tracker-extract.c: Added debugging so we know
	  which modules are loaded on start up and to know which modules are
	  used to extract content on a per file basis to help when we have
	  multiple extractors handling the same mime types. 

	* src/tracker-extract/tracker-main.c: Change logging format when
	  running stand alone and not writing to a log file and don't log
	  everything, only log based on the verbosity setting.

2009-04-21  Ivan Frade  <ivan.frade@nokia.com>

	Add mock test
	A completely empty unit test file was breaking gtester report tool.

	Fix gtester report
	tracker-dbus-test's output was non-utf8 text, and that was
	breaking the gtester XML parsing. Now tracker-dbus-test catch and verify
	the output, without printing it.

2009-04-21  Mikael Ottela  <mikael.ottela@ixonos.com>

	Fixes to the mp3 extractor
	Plugged a leak. Some improvements in the code for the mp3 extractor.

2009-04-21  Carlos Garnacho  <carlosg@gnome.org>

	Avoid reading past the genre names array boundaries.

	Fixes NB#111735, some times tracker is still listing the files from the deleted folders.
	* data/db/sqlite-stored-procs.sql: Also retrieve the Enabled value in
	  GetServiceID.
	* src/libtracker-data/tracker-data-query.[ch] (tracker_data_query_file_id)
	  (tracker_data_query_service_type_id): Interpret disabled services as
	  nonexistent.
	  (tracker_data_query_service_exists): Add extra argument for the Enabled field.
	* src/tracker-indexer/tracker-indexer.c (item_add_or_update) (item_move)
	  (item_mark_for_removal) (handle_metadata_add) (handle_metadata_remove)
	  (should_change_index_for_file): Take into account disabled services, and act
	  accordingly if we step on one of these (Either take as nonexistent, or
	  delete prior to any other operation).

2009-04-20  Mikael Ottela  <mikael.ottela@ixonos.com>

	Performance improvements to jpeg extraction
	We now do much less unnecessary formatting using libexif for better
	performance.

	Read mp3 files in parts in extraction
	We now read last 128 bytes for id3v1 metadata separately from mmap of the mp3
	file in mp3 extraction for better performance. We now handle large mp3 files
	without problems.

	Fixes NB#111560

2009-04-20  Carlos Garnacho  <carlosg@gnome.org>

	Fixes #578159 – Tracker starts to index when removable media is inserted, regardless of user preferences.
	* src/trackerd/tracker-processor.c (tracker_processor_stop): Set state to IDLE
	  right before sending files over to the indexer, so it isn't left in PENDING
	  state if there isn't actually any files in the queues.

2009-04-20  Martyn Russell  <martyn@imendio.com>

	Fixes: NB#110310, metadata_get_multiple returns nothing if some file is missing

	Changed stats cache timeout to 5m and signal stat diffs then too

2009-04-20  Mikael Ottela  <mikael.ottela@ixonos.com>

	Adding missing changes to the makefile for the mockup

	Added an extractor mockup for testing purposes

2009-04-17  Carlos Garnacho  <carlosg@gnome.org>

	Do not make tracker-indexer commit suicide if tracker-extract doesn't get along.
	If tracker-extract fails to return the PID. extractor_pid is 0, so if
	tracker-indexer tries to kill it afterwards, it ends up killing itself.

2009-04-16  Martyn Russell  <martyn@imendio.com>

	Fixes: NB#109891, If deleting last music track or last video...
	The cache expires now after 3 minutes instead of 1 minute which was
	too short. We now use GetServices every time to fix the case where 0
	items for a service type doesn't show up in the
	SERVICE_STATISTICS_UPDATED signal.

2009-04-16  Carlos Garnacho  <carlosg@gnome.org>

	Set GError to NULL before passing it to functions.

2009-04-16  Philip Van Hoof  <philip@codeminded.be>

	No need to do any transformations to rdf:type in ttl files.
	Now rdf:type is mapped correctly to tracker's ontology, and "Files" isn't
	used invariably anymore.

2009-04-16  Ivan Frade  <ivan.frade@nokia.com>

	Fixes: NB#108361, Tracker crashing if commo.db is corrupt

2009-04-16  Martyn Russell  <martyn@imendio.com>

	Added information about Indexer progress and Stats updates to tracker-status

2009-04-15  Jasper Lievisse Adriaanse  <jasper@humppa.nl>

	Fixes: #579049, use g_strndup() instead of strndup()

2009-04-15  Carlos Garnacho  <carlosg@gnome.org>

	Do not make libtracker-module depend on tracker-indexer.
	* src/tracker-indexer/tracker-dbus.[ch]: Changed not to depend on
	  tracker-indexer. Changed tracker_dbus_register_object() signature so all
	  needed info is passed.
	* src/tracker-indexer/tracker-main.c: Pass all necessary info to
	  tracker_dbus_register_object() from here. Add a name monitor hook so we stop
	  the indexer if trackerd dissapears from DBus.
	* src/tracker-indexer/Makefile.am: Add tracker-dbus.c to libtracker-module, so
	  it doesn't have deps on tracker-indexer.

2009-04-15  Jasper Lievisse Adriaanse  <jasper@humppa.nl>

	Fixes: #579047, fix compilation if RLIMIT_AS isn't defined

2009-04-15  Martyn Russell  <martyn@imendio.com>

	Merge branch 'tracker-0.6' of ssh://mr@git.gnome.org/git/tracker into tracker-0.6

	Fixes: NB#109046, Tracker is slow to index all the images in ...

	Fixes: NB#109891, If deleting last music track or last video...

2009-04-15  Carlos Garnacho  <carlosg@gnome.org>

	Do not puke with paths containing ':'
	* src/libtracker-common/tracker-albumart.c (tracker_albumart_get_path): Improve
	  a bit this stupid check to distinguish paths from URIs.

	Listen for NameOwnerChanged signals for the extractor.
	* src/tracker-indexer/tracker-dbus.[ch] (tracker_dbus_add_name_monitor)
	  (tracker_dbus_remove_name_monitor): Added infrastructure for monitoring
	  owner changes for certain services.
	* src/tracker-indexer/tracker-module-metadata-utils.c: Listen for changes in
	  ownership of org.freedesktop.Tracker.Extract, request new PID each time the
	  service becomes available.

2009-04-15  Philip Van Hoof  <philip@codeminded.be>

	Removing the database file when it's corrupted, just before we bail out and crash

2009-04-14  Martyn Russell  <martyn@imendio.com>

	Reduce strlen() calls and use g_free() not free() on GLib strings

	Fixed Sun OS build errors, patch by Xin Lai

	Simplified --process-all translation in tracker-indexer

2009-04-14  Jürg Billeter  <j@bitron.ch>

	Generate ChangeLog from git log
	Add gitlog-to-changelog script from gnulib and a dist-hook to
	generate ChangeLog file when creating tarballs.
